
<!--
 DO NOT EDIT.
 THIS FILE WAS AUTOMATICALLY GENERATED BY mkdocs-gallery.
 TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
 "docs/scripts/project/problem2.py"
 LINE NUMBERS ARE GIVEN BELOW.
-->

!!! note

    Click [here](#download_links)
    to download the full example code


Problem 2 : Uncertainty quantification

<!-- GENERATED FROM PYTHON SOURCE LINES 5-27 -->

```{.python }

from numpy import array
import pickle
from pathlib import Path

from lh2pac.gemseo.discipline import H2TurboFan
from lh2pac.gemseo.utils import draw_aircraft
from lh2pac.gemseo.utils import get_aircraft_data
from gemseo import configure_logger
from gemseo import create_scenario
from gemseo import create_surrogate
from gemseo import import_discipline
from gemseo.algos.design_space import DesignSpace
from gemseo.algos.parameter_space import ParameterSpace
from gemseo.mlearning.quality_measures.r2_measure import R2Measure
from gemseo.mlearning.quality_measures.rmse_measure import RMSEMeasure
from gemseo_mlearning.api import sample_discipline


from lh2pac.marilib.utils import unit

configure_logger()
```

<!-- GENERATED FROM PYTHON SOURCE LINES 28-32 -->

```{.python }

# ## Airplane initialization
# First, we instantiate the discipline:
discipline = H2TurboFan()
```

<!-- GENERATED FROM PYTHON SOURCE LINES 33-35 -->

Then,
we can have a look at its input names:

<!-- GENERATED FROM PYTHON SOURCE LINES 35-37 -->

```{.python }
print('input data names : ')
print(discipline.get_input_data_names())
```

<!-- GENERATED FROM PYTHON SOURCE LINES 38-42 -->

```{.python }

output_parameters = discipline.get_output_data_names()
print('output params :')
print(output_parameters)
```

<!-- GENERATED FROM PYTHON SOURCE LINES 43-47 -->

```{.python }

# and default input values:
print('default inputs :')
print(discipline.default_inputs)
```

<!-- GENERATED FROM PYTHON SOURCE LINES 48-51 -->

```{.python }

# and execute the discipline with these values:
discipline.execute()
```

<!-- GENERATED FROM PYTHON SOURCE LINES 52-59 -->

```{.python }

# We can print the aircraft data:
aircraft_data = get_aircraft_data(discipline)

# aircraft data 
print('aircraft data : ')
print(aircraft_data)
```

<!-- GENERATED FROM PYTHON SOURCE LINES 60-65 -->

```{.python }

# and draw the aircraft:
draw_aircraft(discipline, "The default A/C")


```

<!-- GENERATED FROM PYTHON SOURCE LINES 66-75 -->

```{.python }
class MyUncertainSpace(ParameterSpace):
    def __init__(self):
        super().__init__()
        self.add_random_variable("tgi", "SPTriangularDistribution", minimum=0.25,mode=0.3, maximum=0.305)
        self.add_random_variable("tvi", "SPTriangularDistribution", minimum=0.8,mode=0.845, maximum=0.85)
        self.add_random_variable("sfc", "SPTriangularDistribution", minimum=0.99,mode=1.0, maximum=1.03)
        self.add_random_variable("mass", "SPTriangularDistribution", minimum=0.99,mode=1.0, maximum=1.03)
        self.add_random_variable("drag", "SPTriangularDistribution", minimum=0.99,mode=1.0, maximum=1.03)
        
```

<!-- GENERATED FROM PYTHON SOURCE LINES 76-78 -->

```{.python }
uncertain_space = MyUncertainSpace()
print(uncertain_space)
```

<!-- GENERATED FROM PYTHON SOURCE LINES 79-81 -->

```{.python }
dataset = sample_discipline(discipline, uncertain_space, ['mtow'], "OT_MONTE_CARLO", 100)

```

<!-- GENERATED FROM PYTHON SOURCE LINES 82-90 -->

```{.python }

from gemseo.uncertainty import create_statistics
statistics = create_statistics(dataset)
mean = statistics.compute_mean()
variance = statistics.compute_variance()
names = ["mtow","tgi","tvi","sfc","mass","drag"]
for name in names:
    print(name, mean[name][0], variance[name][0])
```

<!-- GENERATED FROM PYTHON SOURCE LINES 91-97 -->

```{.python }
import matplotlib.pyplot as plt
fig, axes = plt.subplots(2, 3,figsize = (15,10))
for i,(ax, name) in enumerate(zip(axes.flatten(), names)):
    ax.hist(dataset.get_view(variable_names=name),bins=20,)
    ax.set_title(name)
plt.show()
```

<!-- GENERATED FROM PYTHON SOURCE LINES 98-99 -->

# compute Sobol indices

<!-- GENERATED FROM PYTHON SOURCE LINES 99-103 -->

```{.python }
from gemseo.uncertainty.sensitivity.sobol.analysis import SobolAnalysis

sobol = SobolAnalysis([discipline],uncertain_space,100)
sobol.compute_indices()
```

<!-- GENERATED FROM PYTHON SOURCE LINES 104-107 -->

```{.python }
import pprint
pprint.pprint(sobol.first_order_indices)
pprint.pprint(sobol.total_order_indices)
```

<!-- GENERATED FROM PYTHON SOURCE LINES 108-109 -->

```{.python }
sobol.plot("mtow",save=False,show=True)
```

<!-- GENERATED FROM PYTHON SOURCE LINES 110-111 -->

# sobol for surrogate model 

<!-- GENERATED FROM PYTHON SOURCE LINES 111-136 -->

```{.python }
dataset_surro = sample_discipline(
    discipline,
    uncertain_space,
    ["mtow"],
    "OT_OPT_LHS",
    30
)
    # %%
regressors = [
    "GaussianProcessRegressor",
    "GradientBoostingRegressor",
    "LinearRegressor",
    "MLPRegressor",
    "MOERegressor",
    "OTGaussianProcessRegressor",
    "PCERegressor",
    "PolynomialRegressor",
    "RBFRegressor",
    "RandomForestRegressor",
    "RegressorChain",
    "SVMRegressor",
    "TPSRegressor"
]
surrogate_discipline = create_surrogate("RBFRegressor",dataset_surro)
print(surrogate_discipline)
```

<!-- GENERATED FROM PYTHON SOURCE LINES 137-139 -->

```{.python }
sobol = SobolAnalysis([surrogate_discipline],uncertain_space,10000)
sobol.compute_indices()
```

<!-- GENERATED FROM PYTHON SOURCE LINES 140-143 -->

```{.python }
import pprint
pprint.pprint(sobol.first_order_indices)
pprint.pprint(sobol.total_order_indices)
```

<!-- GENERATED FROM PYTHON SOURCE LINES 144-145 -->

```{.python }
sobol.plot("mtow",save=False,show=True)
```

<!-- GENERATED FROM PYTHON SOURCE LINES 146-147 -->

# Morris Analysis 

<!-- GENERATED FROM PYTHON SOURCE LINES 147-150 -->

```{.python }
from gemseo.uncertainty.sensitivity.morris.analysis import MorrisAnalysis
morris_analysis = MorrisAnalysis([discipline], uncertain_space, 100)
morris_analysis.compute_indices() 
```

<!-- GENERATED FROM PYTHON SOURCE LINES 151-154 -->

```{.python }
surrogate_morris_analysis = MorrisAnalysis([surrogate_discipline],uncertain_space,100)
surrogate_morris_analysis.compute_indices() 

```

<!-- GENERATED FROM PYTHON SOURCE LINES 155-157 -->

```{.python }
morris_analysis.plot("mtow",save=False,show=True)

```

<!-- GENERATED FROM PYTHON SOURCE LINES 158-159 -->

```{.python }
surrogate_morris_analysis.plot("mtow",save=False,show=True)
```


**Total running time of the script:** ( 0 minutes  0.000 seconds)

<div id="download_links"></div>



[:fontawesome-solid-download: Download Python source code: problem2.py](./problem2.py){ .md-button .center}

[:fontawesome-solid-download: Download Jupyter notebook: problem2.ipynb](./problem2.ipynb){ .md-button .center}


[Gallery generated by mkdocs-gallery](https://mkdocs-gallery.github.io){: .mkd-glr-signature }
