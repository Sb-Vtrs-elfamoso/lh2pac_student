
<!--
 DO NOT EDIT.
 THIS FILE WAS AUTOMATICALLY GENERATED BY mkdocs-gallery.
 TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
 "docs/scripts/examples/plot_optimization.py"
 LINE NUMBERS ARE GIVEN BELOW.
-->

!!! note

    Click [here](#download_links)
    to download the full example code


# Optimization

We want to minimize the Rosenbrock function $f(x,y)=(1-x)^2+100(y-x**2)^2$
over the domain $[-2,2]^2$.

<!-- GENERATED FROM PYTHON SOURCE LINES 7-12 -->

```{.python }
from gemseo import configure_logger
from gemseo import create_design_space
from gemseo import create_discipline
from gemseo import create_scenario

```








<!-- GENERATED FROM PYTHON SOURCE LINES 13-15 -->

Before starting,
we activate the logger as an optimization process logs meaningful information.

<!-- GENERATED FROM PYTHON SOURCE LINES 15-17 -->

```{.python }
configure_logger()

```




Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }

<RootLogger root (INFO)>
```





<!-- GENERATED FROM PYTHON SOURCE LINES 18-21 -->

Firstly,
we define the discipline computing the Rosenbrock function
and the Euclidean distance to the optimum:

<!-- GENERATED FROM PYTHON SOURCE LINES 21-27 -->

```{.python }
discipline = create_discipline(
    "AnalyticDiscipline",
    expressions={"z": "(1-x)**2+100*(y-x**2)**2", "c": "((x-1)**2+(y-1)**2)**0.5"},
    name="Rosenbrock"
)

```








<!-- GENERATED FROM PYTHON SOURCE LINES 28-29 -->

Then, we create the design space:

<!-- GENERATED FROM PYTHON SOURCE LINES 29-33 -->

```{.python }
design_space = create_design_space()
design_space.add_variable("x", l_b=-2., u_b=2., value=0.)
design_space.add_variable("y", l_b=-2., u_b=2., value=0.)

```








<!-- GENERATED FROM PYTHON SOURCE LINES 34-40 -->

Thirdly,
we put these elements together in a scenario
to minimize the Rosenbrock function
under the constraint that the distance
between the design point and the solution of the unconstrained problem
is greater or equal to 1.

<!-- GENERATED FROM PYTHON SOURCE LINES 40-43 -->

```{.python }
scenario = create_scenario([discipline], "DisciplinaryOpt", "z", design_space)
scenario.add_constraint("c", constraint_type="ineq", positive=True, value=1.)

```




Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }
/home/tortank-el-famoso/Documents/INSA/S4_MODIA_N7/Metamodelisation/lh2pac/.venv/lib/python3.10/site-packages/gemseo/core/base_factory.py:166: DeprecationWarning: SelectableGroups dict interface is deprecated. Use select.
  for entry_point in metadata.entry_points().get(self.PLUGIN_ENTRY_POINT, []):

```





<!-- GENERATED FROM PYTHON SOURCE LINES 44-52 -->

!!! note

    GEMSEO is a Python library
    dedicated to multidisciplinary design optimization (MDO)
    based on the notion of MDO formulation.
    This is why the second positional argument `formulation` is mandatory.
    But when using the scenario with a unique discipline,
    don't bother and consider `"DisciplinaryOpt"`.

<!-- GENERATED FROM PYTHON SOURCE LINES 54-55 -->

before executing it with a gradient-free optimizer:

<!-- GENERATED FROM PYTHON SOURCE LINES 55-57 -->

```{.python }
scenario.execute({"algo": "NLOPT_COBYLA", "max_iter": 100})

```




Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }
    INFO - 17:02:12:  
    INFO - 17:02:12: *** Start MDOScenario execution ***
    INFO - 17:02:12: MDOScenario
    INFO - 17:02:12:    Disciplines: Rosenbrock
    INFO - 17:02:12:    MDO formulation: DisciplinaryOpt
    INFO - 17:02:12: Optimization problem:
    INFO - 17:02:12:    minimize z(x, y)
    INFO - 17:02:12:    with respect to x, y
    INFO - 17:02:12:    subject to constraints:
    INFO - 17:02:12:       c(x, y) >= 1.0
    INFO - 17:02:12:    over the design space:
    INFO - 17:02:12:       +------+-------------+-------+-------------+-------+
    INFO - 17:02:12:       | Name | Lower bound | Value | Upper bound | Type  |
    INFO - 17:02:12:       +------+-------------+-------+-------------+-------+
    INFO - 17:02:12:       | x    |      -2     |   0   |      2      | float |
    INFO - 17:02:12:       | y    |      -2     |   0   |      2      | float |
    INFO - 17:02:12:       +------+-------------+-------+-------------+-------+
    INFO - 17:02:12: Solving optimization problem with algorithm NLOPT_COBYLA:
    INFO - 17:02:12:      1%|          | 1/100 [00:00<00:00, 751.26 it/sec, obj=1]
    INFO - 17:02:12:      2%|▏         | 2/100 [00:00<00:00, 1045.57 it/sec, obj=100]
    INFO - 17:02:12:      3%|▎         | 3/100 [00:00<00:00, 1318.96 it/sec, obj=101]
    INFO - 17:02:12:      4%|▍         | 4/100 [00:00<00:00, 1399.38 it/sec, obj=148]
    INFO - 17:02:12:      5%|▌         | 5/100 [00:00<00:00, 1451.12 it/sec, obj=24.8]
    INFO - 17:02:12:      6%|▌         | 6/100 [00:00<00:00, 1515.37 it/sec, obj=3.64]
    INFO - 17:02:12:      7%|▋         | 7/100 [00:00<00:00, 1546.17 it/sec, obj=6.11]
    INFO - 17:02:12:      8%|▊         | 8/100 [00:00<00:00, 1584.55 it/sec, obj=1.88]
    INFO - 17:02:12:      9%|▉         | 9/100 [00:00<00:00, 1609.21 it/sec, obj=1.4]
    INFO - 17:02:12:     10%|█         | 10/100 [00:00<00:00, 1626.96 it/sec, obj=0.954]
    INFO - 17:02:12:     11%|█         | 11/100 [00:00<00:00, 1649.71 it/sec, obj=1.21]
    INFO - 17:02:12:     12%|█▏        | 12/100 [00:00<00:00, 1663.53 it/sec, obj=0.861]
    INFO - 17:02:12:     13%|█▎        | 13/100 [00:00<00:00, 1678.08 it/sec, obj=0.88]
    INFO - 17:02:12:     14%|█▍        | 14/100 [00:00<00:00, 1694.03 it/sec, obj=0.841]
    INFO - 17:02:12:     15%|█▌        | 15/100 [00:00<00:00, 1705.56 it/sec, obj=0.833]
    INFO - 17:02:12:     16%|█▌        | 16/100 [00:00<00:00, 1717.79 it/sec, obj=0.784]
    INFO - 17:02:12:     17%|█▋        | 17/100 [00:00<00:00, 1731.46 it/sec, obj=0.762]
    INFO - 17:02:12:     18%|█▊        | 18/100 [00:00<00:00, 1732.31 it/sec, obj=0.742]
    INFO - 17:02:12:     19%|█▉        | 19/100 [00:00<00:00, 1742.39 it/sec, obj=0.749]
    INFO - 17:02:12:     20%|██        | 20/100 [00:00<00:00, 1748.36 it/sec, obj=0.729]
    INFO - 17:02:12:     21%|██        | 21/100 [00:00<00:00, 1749.36 it/sec, obj=0.727]
    INFO - 17:02:12:     22%|██▏       | 22/100 [00:00<00:00, 1755.14 it/sec, obj=0.745]
    INFO - 17:02:12:     23%|██▎       | 23/100 [00:00<00:00, 1763.57 it/sec, obj=0.713]
    INFO - 17:02:12:     24%|██▍       | 24/100 [00:00<00:00, 1773.52 it/sec, obj=0.7]
    INFO - 17:02:12:     25%|██▌       | 25/100 [00:00<00:00, 1779.21 it/sec, obj=0.688]
    INFO - 17:02:12:     26%|██▌       | 26/100 [00:00<00:00, 1787.53 it/sec, obj=0.675]
    INFO - 17:02:12:     27%|██▋       | 27/100 [00:00<00:00, 1794.54 it/sec, obj=0.664]
    INFO - 17:02:12:     28%|██▊       | 28/100 [00:00<00:00, 1797.35 it/sec, obj=0.652]
    INFO - 17:02:12:     29%|██▉       | 29/100 [00:00<00:00, 1802.61 it/sec, obj=0.64]
    INFO - 17:02:12:     30%|███       | 30/100 [00:00<00:00, 1807.29 it/sec, obj=0.629]
    INFO - 17:02:12:     31%|███       | 31/100 [00:00<00:00, 1809.70 it/sec, obj=0.618]
    INFO - 17:02:12:     32%|███▏      | 32/100 [00:00<00:00, 1814.61 it/sec, obj=0.607]
    INFO - 17:02:12:     33%|███▎      | 33/100 [00:00<00:00, 1820.35 it/sec, obj=0.596]
    INFO - 17:02:12:     34%|███▍      | 34/100 [00:00<00:00, 1822.40 it/sec, obj=0.585]
    INFO - 17:02:12:     35%|███▌      | 35/100 [00:00<00:00, 1826.86 it/sec, obj=0.576]
    INFO - 17:02:12:     36%|███▌      | 36/100 [00:00<00:00, 1829.35 it/sec, obj=0.566]
    INFO - 17:02:12:     37%|███▋      | 37/100 [00:00<00:00, 1830.62 it/sec, obj=0.544]
    INFO - 17:02:12:     38%|███▊      | 38/100 [00:00<00:00, 1830.63 it/sec, obj=0.524]
    INFO - 17:02:12:     39%|███▉      | 39/100 [00:00<00:00, 1833.73 it/sec, obj=0.513]
    INFO - 17:02:12:     40%|████      | 40/100 [00:00<00:00, 1837.99 it/sec, obj=0.491]
    INFO - 17:02:12:     41%|████      | 41/100 [00:00<00:00, 1841.89 it/sec, obj=0.511]
    INFO - 17:02:12:     42%|████▏     | 42/100 [00:00<00:00, 1843.98 it/sec, obj=0.577]
    INFO - 17:02:12:     43%|████▎     | 43/100 [00:00<00:00, 1847.71 it/sec, obj=0.527]
    INFO - 17:02:12:     44%|████▍     | 44/100 [00:00<00:00, 1850.17 it/sec, obj=0.493]
    INFO - 17:02:12:     45%|████▌     | 45/100 [00:00<00:00, 1848.87 it/sec, obj=0.485]
    INFO - 17:02:12:     46%|████▌     | 46/100 [00:00<00:00, 1851.40 it/sec, obj=0.483]
    INFO - 17:02:12:     47%|████▋     | 47/100 [00:00<00:00, 1853.64 it/sec, obj=0.511]
    INFO - 17:02:12:     48%|████▊     | 48/100 [00:00<00:00, 1855.97 it/sec, obj=0.47]
    INFO - 17:02:12:     49%|████▉     | 49/100 [00:00<00:00, 1859.06 it/sec, obj=0.468]
    INFO - 17:02:12:     50%|█████     | 50/100 [00:00<00:00, 1862.60 it/sec, obj=0.457]
    INFO - 17:02:12:     51%|█████     | 51/100 [00:00<00:00, 1862.69 it/sec, obj=0.449]
    INFO - 17:02:12:     52%|█████▏    | 52/100 [00:00<00:00, 1864.85 it/sec, obj=0.44]
    INFO - 17:02:12:     53%|█████▎    | 53/100 [00:00<00:00, 1864.42 it/sec, obj=0.431]
    INFO - 17:02:12:     54%|█████▍    | 54/100 [00:00<00:00, 1864.96 it/sec, obj=0.415]
    INFO - 17:02:12:     55%|█████▌    | 55/100 [00:00<00:00, 1866.99 it/sec, obj=0.411]
    INFO - 17:02:12:     56%|█████▌    | 56/100 [00:00<00:00, 1869.33 it/sec, obj=0.394]
    INFO - 17:02:12:     57%|█████▋    | 57/100 [00:00<00:00, 1869.27 it/sec, obj=0.422]
    INFO - 17:02:12:     58%|█████▊    | 58/100 [00:00<00:00, 1870.46 it/sec, obj=0.403]
    INFO - 17:02:12:     59%|█████▉    | 59/100 [00:00<00:00, 1871.48 it/sec, obj=0.393]
    INFO - 17:02:12:     60%|██████    | 60/100 [00:00<00:00, 1873.11 it/sec, obj=0.391]
    INFO - 17:02:12:     61%|██████    | 61/100 [00:00<00:00, 1873.60 it/sec, obj=0.382]
    INFO - 17:02:12:     62%|██████▏   | 62/100 [00:00<00:00, 1874.17 it/sec, obj=0.375]
    INFO - 17:02:12:     63%|██████▎   | 63/100 [00:00<00:00, 1875.69 it/sec, obj=0.371]
    INFO - 17:02:12:     64%|██████▍   | 64/100 [00:00<00:00, 1875.48 it/sec, obj=0.363]
    INFO - 17:02:12:     65%|██████▌   | 65/100 [00:00<00:00, 1876.52 it/sec, obj=0.364]
    INFO - 17:02:12:     66%|██████▌   | 66/100 [00:00<00:00, 1876.25 it/sec, obj=0.362]
    INFO - 17:02:12:     67%|██████▋   | 67/100 [00:00<00:00, 1877.57 it/sec, obj=0.357]
    INFO - 17:02:12:     68%|██████▊   | 68/100 [00:00<00:00, 1878.19 it/sec, obj=0.355]
    INFO - 17:02:12:     69%|██████▉   | 69/100 [00:00<00:00, 1878.05 it/sec, obj=0.351]
    INFO - 17:02:12:     70%|███████   | 70/100 [00:00<00:00, 1878.21 it/sec, obj=0.347]
    INFO - 17:02:12:     71%|███████   | 71/100 [00:00<00:00, 1879.01 it/sec, obj=0.34]
    INFO - 17:02:12:     72%|███████▏  | 72/100 [00:00<00:00, 1880.35 it/sec, obj=0.334]
    INFO - 17:02:12:     73%|███████▎  | 73/100 [00:00<00:00, 1879.91 it/sec, obj=0.334]
    INFO - 17:02:12:     74%|███████▍  | 74/100 [00:00<00:00, 1880.61 it/sec, obj=0.334]
    INFO - 17:02:12:     75%|███████▌  | 75/100 [00:00<00:00, 1881.77 it/sec, obj=0.337]
    INFO - 17:02:12:     76%|███████▌  | 76/100 [00:00<00:00, 1880.14 it/sec, obj=0.332]
    INFO - 17:02:12:     77%|███████▋  | 77/100 [00:00<00:00, 1880.99 it/sec, obj=0.331]
    INFO - 17:02:12:     78%|███████▊  | 78/100 [00:00<00:00, 1882.30 it/sec, obj=0.329]
    INFO - 17:02:12:     79%|███████▉  | 79/100 [00:00<00:00, 1882.14 it/sec, obj=0.331]
    INFO - 17:02:12:     80%|████████  | 80/100 [00:00<00:00, 1882.64 it/sec, obj=0.328]
    INFO - 17:02:12:     81%|████████  | 81/100 [00:00<00:00, 1883.72 it/sec, obj=0.329]
    INFO - 17:02:12:     82%|████████▏ | 82/100 [00:00<00:00, 1884.61 it/sec, obj=0.329]
    INFO - 17:02:12:     83%|████████▎ | 83/100 [00:00<00:00, 1884.83 it/sec, obj=0.328]
    INFO - 17:02:12:     84%|████████▍ | 84/100 [00:00<00:00, 1885.43 it/sec, obj=0.328]
    INFO - 17:02:12:     85%|████████▌ | 85/100 [00:00<00:00, 1885.73 it/sec, obj=0.329]
    INFO - 17:02:12:     86%|████████▌ | 86/100 [00:00<00:00, 1885.89 it/sec, obj=0.328]
    INFO - 17:02:12:     87%|████████▋ | 87/100 [00:00<00:00, 1886.50 it/sec, obj=0.328]
    INFO - 17:02:12:     88%|████████▊ | 88/100 [00:00<00:00, 1886.80 it/sec, obj=0.328]
    INFO - 17:02:12:     89%|████████▉ | 89/100 [00:00<00:00, 1887.64 it/sec, obj=0.328]
    INFO - 17:02:12:     90%|█████████ | 90/100 [00:00<00:00, 1888.80 it/sec, obj=0.328]
    INFO - 17:02:12:     91%|█████████ | 91/100 [00:00<00:00, 1888.55 it/sec, obj=0.328]
    INFO - 17:02:12:     92%|█████████▏| 92/100 [00:00<00:00, 1888.47 it/sec, obj=0.328]
    INFO - 17:02:12:     93%|█████████▎| 93/100 [00:00<00:00, 1887.96 it/sec, obj=0.328]
    INFO - 17:02:12:     94%|█████████▍| 94/100 [00:00<00:00, 1888.35 it/sec, obj=0.328]
    INFO - 17:02:12:     95%|█████████▌| 95/100 [00:00<00:00, 1889.16 it/sec, obj=0.328]
    INFO - 17:02:12:     96%|█████████▌| 96/100 [00:00<00:00, 1888.84 it/sec, obj=0.328]
    INFO - 17:02:12:     97%|█████████▋| 97/100 [00:00<00:00, 1889.66 it/sec, obj=0.328]
    INFO - 17:02:12:     98%|█████████▊| 98/100 [00:00<00:00, 1890.40 it/sec, obj=0.328]
    INFO - 17:02:12:     99%|█████████▉| 99/100 [00:00<00:00, 1889.96 it/sec, obj=0.328]
    INFO - 17:02:12:    100%|██████████| 100/100 [00:00<00:00, 1890.25 it/sec, obj=0.328]
    INFO - 17:02:12: Optimization result:
    INFO - 17:02:12:    Optimizer info:
    INFO - 17:02:12:       Status: None
    INFO - 17:02:12:       Message: Maximum number of iterations reached. GEMSEO Stopped the driver
    INFO - 17:02:12:       Number of calls to the objective function by the optimizer: 102
    INFO - 17:02:12:    Solution:
    INFO - 17:02:12:       The solution is feasible.
    INFO - 17:02:12:       Objective: 0.3283010611441774
    INFO - 17:02:12:       Standardized constraints:
    INFO - 17:02:12:          -[c-1.0] = 6.591815177348082e-05
    INFO - 17:02:12:       Design space:
    INFO - 17:02:12:          +------+-------------+--------------------+-------------+-------+
    INFO - 17:02:12:          | Name | Lower bound |       Value        | Upper bound | Type  |
    INFO - 17:02:12:          +------+-------------+--------------------+-------------+-------+
    INFO - 17:02:12:          | x    |      -2     | 0.4281647812612155 |      2      | float |
    INFO - 17:02:12:          | y    |      -2     | 0.1797118490118108 |      2      | float |
    INFO - 17:02:12:          +------+-------------+--------------------+-------------+-------+
    INFO - 17:02:12: *** End MDOScenario execution (time: 0:00:00.058976) ***

{'max_iter': 100, 'algo': 'NLOPT_COBYLA'}
```





<!-- GENERATED FROM PYTHON SOURCE LINES 58-60 -->

Lastly,
we can plot the optimization history:

<!-- GENERATED FROM PYTHON SOURCE LINES 60-61 -->

```{.python }
scenario.post_process("OptHistoryView", save=False, show=True)
```



<ul class="mkd-glr-horizontal">
<img alt="Evolution of the optimization variables" src="../images/mkd_glr_plot_optimization_001.png" srcset="../images/mkd_glr_plot_optimization_001.png", class="sphx-glr-single-img" /><img alt="Evolution of the objective value" src="../images/mkd_glr_plot_optimization_002.png" srcset="../images/mkd_glr_plot_optimization_002.png", class="sphx-glr-single-img" /><img alt="Distance to the optimum" src="../images/mkd_glr_plot_optimization_003.png" srcset="../images/mkd_glr_plot_optimization_003.png", class="sphx-glr-single-img" /><img alt="Evolution of the inequality constraints" src="../images/mkd_glr_plot_optimization_004.png" srcset="../images/mkd_glr_plot_optimization_004.png", class="sphx-glr-single-img" />
</ul>


Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }
/home/tortank-el-famoso/Documents/INSA/S4_MODIA_N7/Metamodelisation/lh2pac/.venv/lib/python3.10/site-packages/gemseo/core/base_factory.py:166: DeprecationWarning: SelectableGroups dict interface is deprecated. Use select.
  for entry_point in metadata.entry_points().get(self.PLUGIN_ENTRY_POINT, []):
/home/tortank-el-famoso/Documents/INSA/S4_MODIA_N7/Metamodelisation/lh2pac/.venv/lib/python3.10/site-packages/gemseo/utils/matplotlib_figure.py:57: UserWarning: FigureCanvasAgg is non-interactive, and thus cannot be shown
  plt.show()

<gemseo.post.opt_history_view.OptHistoryView object at 0x7f3e39473310>
```






**Total running time of the script:** ( 0 minutes  0.679 seconds)

<div id="download_links"></div>



[:fontawesome-solid-download: Download Python source code: plot_optimization.py](./plot_optimization.py){ .md-button .center}

[:fontawesome-solid-download: Download Jupyter notebook: plot_optimization.ipynb](./plot_optimization.ipynb){ .md-button .center}


[Gallery generated by mkdocs-gallery](https://mkdocs-gallery.github.io){: .mkd-glr-signature }
