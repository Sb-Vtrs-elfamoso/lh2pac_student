
<!--
 DO NOT EDIT.
 THIS FILE WAS AUTOMATICALLY GENERATED BY mkdocs-gallery.
 TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
 "docs/scripts/examples/plot_doe.py"
 LINE NUMBERS ARE GIVEN BELOW.
-->

!!! note

    Click [here](#download_links)
    to download the full example code


# Design of experiments

The `DOEScenario` defines an evaluation problem
from one or more disciplines,
a design space
and a DOE (design of experiments) algorithm.

In this example,
we want to sample the
[Rosenbrock function](https://en.wikipedia.org/wiki/Rosenbrock_function)
$f(x,y)=(1-x)^2+100*(y-x^2)^2$
over the design space $[-2,2]^2$
with a latin hypercube sampling (LHS) algorithm
improved by simulated annealing.

<!-- GENERATED FROM PYTHON SOURCE LINES 17-23 -->

```{.python }

from gemseo import configure_logger
from gemseo import create_design_space
from gemseo import create_discipline
from gemseo import create_scenario

```








<!-- GENERATED FROM PYTHON SOURCE LINES 24-26 -->

First,
we activate the logger.

<!-- GENERATED FROM PYTHON SOURCE LINES 26-28 -->

```{.python }
configure_logger()

```




Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }

<RootLogger root (INFO)>
```





<!-- GENERATED FROM PYTHON SOURCE LINES 29-31 -->

Then,
we create a discipline to evaluate $(1-x)^2+100*(y-x^2)^2$:

<!-- GENERATED FROM PYTHON SOURCE LINES 31-36 -->

```{.python }
discipline = create_discipline(
    "AnalyticDiscipline",
    expressions={"z": "(1-x)**2+100*(y-x**2)**2"},
    name="Rosenbrock",
)
```




Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }
/home/tortank-el-famoso/Documents/INSA/S4_MODIA_N7/Metamodelisation/lh2pac/.venv/lib/python3.10/site-packages/gemseo/core/base_factory.py:166: DeprecationWarning: SelectableGroups dict interface is deprecated. Use select.
  for entry_point in metadata.entry_points().get(self.PLUGIN_ENTRY_POINT, []):

```





<!-- GENERATED FROM PYTHON SOURCE LINES 37-46 -->

!!! note

    The `AnalyticDiscipline` allows us to define functions from strings
    and automatically get the expression of the derivatives,
    based on [sympy](https://www.sympy.org/fr/),
    a Python library for symbolic mathematics.

Then,
we create the design space $[-2,2]^2$:

<!-- GENERATED FROM PYTHON SOURCE LINES 46-50 -->

```{.python }
design_space = create_design_space()
design_space.add_variable("x", l_b=-2, u_b=2)
design_space.add_variable("y", l_b=-2, u_b=2)

```








<!-- GENERATED FROM PYTHON SOURCE LINES 51-53 -->

Thirdly,
we create a `DOEScenario` from this discipline and this design space:

<!-- GENERATED FROM PYTHON SOURCE LINES 53-57 -->

```{.python }
disciplines = [discipline]
scenario = create_scenario(
    disciplines, "DisciplinaryOpt", "z", design_space, scenario_type="DOE"
)
```




Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }
/home/tortank-el-famoso/Documents/INSA/S4_MODIA_N7/Metamodelisation/lh2pac/.venv/lib/python3.10/site-packages/pyDOE2/doe_factorial.py:16: DeprecationWarning: the imp module is deprecated in favour of importlib and slated for removal in Python 3.12; see the module's documentation for alternative uses
  import imp
/home/tortank-el-famoso/Documents/INSA/S4_MODIA_N7/Metamodelisation/lh2pac/.venv/lib/python3.10/site-packages/gemseo/core/base_factory.py:166: DeprecationWarning: SelectableGroups dict interface is deprecated. Use select.
  for entry_point in metadata.entry_points().get(self.PLUGIN_ENTRY_POINT, []):

```





<!-- GENERATED FROM PYTHON SOURCE LINES 58-83 -->

!!! note

    `"DisciplinaryOpt"` means that we evaluate the `disciplines` sequentially;
    then,
    if the output of a discipline is the input of one of the following,
    its value will be used
    (in this case,
    there is only one discipline but the argument is mandatory).

!!! note

    In the case where there is more than one output of interest,
    you can use the method `add_observable`
    to store the evaluations of the other outputs of interest:

    ```python
       scenario = create_scenario(
           disciplines, "DisciplinaryOpt", "foo", design_space, scenario_type="DOE"
       )
       scenario.add_observable("bar")
       scenario.add_observable("baz")
    ```

Now,
we can sample the discipline to get 100 evaluations of the triple $(x,y,z)$:

<!-- GENERATED FROM PYTHON SOURCE LINES 83-85 -->

```{.python }
scenario.execute({"algo": "OT_OPT_LHS", "n_samples": 100})

```




Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }
    INFO - 17:02:08:  
    INFO - 17:02:08: *** Start DOEScenario execution ***
    INFO - 17:02:08: DOEScenario
    INFO - 17:02:08:    Disciplines: Rosenbrock
    INFO - 17:02:08:    MDO formulation: DisciplinaryOpt
    INFO - 17:02:08: Optimization problem:
    INFO - 17:02:08:    minimize z(x, y)
    INFO - 17:02:08:    with respect to x, y
    INFO - 17:02:08:    over the design space:
    INFO - 17:02:08:       +------+-------------+-------+-------------+-------+
    INFO - 17:02:08:       | Name | Lower bound | Value | Upper bound | Type  |
    INFO - 17:02:08:       +------+-------------+-------+-------------+-------+
    INFO - 17:02:08:       | x    |      -2     |  None |      2      | float |
    INFO - 17:02:08:       | y    |      -2     |  None |      2      | float |
    INFO - 17:02:08:       +------+-------------+-------+-------------+-------+
    INFO - 17:02:08: Solving optimization problem with algorithm OT_OPT_LHS:
    INFO - 17:02:08:      1%|          | 1/100 [00:00<00:00, 903.36 it/sec, obj=2.19e+3]
    INFO - 17:02:08:      2%|▏         | 2/100 [00:00<00:00, 1337.68 it/sec, obj=1.07e+3]
    INFO - 17:02:08:      3%|▎         | 3/100 [00:00<00:00, 1702.46 it/sec, obj=675]
    INFO - 17:02:08:      4%|▍         | 4/100 [00:00<00:00, 2013.59 it/sec, obj=1.15e+3]
    INFO - 17:02:08:      5%|▌         | 5/100 [00:00<00:00, 2258.65 it/sec, obj=2.51e+3]
    INFO - 17:02:08:      6%|▌         | 6/100 [00:00<00:00, 2487.48 it/sec, obj=30.7]
    INFO - 17:02:08:      7%|▋         | 7/100 [00:00<00:00, 2692.60 it/sec, obj=2.18e+3]
    INFO - 17:02:08:      8%|▊         | 8/100 [00:00<00:00, 2868.39 it/sec, obj=885]
    INFO - 17:02:08:      9%|▉         | 9/100 [00:00<00:00, 3013.87 it/sec, obj=53.1]
    INFO - 17:02:08:     10%|█         | 10/100 [00:00<00:00, 3144.86 it/sec, obj=994]
    INFO - 17:02:08:     11%|█         | 11/100 [00:00<00:00, 3270.53 it/sec, obj=169]
    INFO - 17:02:08:     12%|█▏        | 12/100 [00:00<00:00, 3382.96 it/sec, obj=735]
    INFO - 17:02:08:     13%|█▎        | 13/100 [00:00<00:00, 3487.65 it/sec, obj=0.9]
    INFO - 17:02:08:     14%|█▍        | 14/100 [00:00<00:00, 3560.53 it/sec, obj=244]
    INFO - 17:02:08:     15%|█▌        | 15/100 [00:00<00:00, 3635.42 it/sec, obj=266]
    INFO - 17:02:08:     16%|█▌        | 16/100 [00:00<00:00, 3709.11 it/sec, obj=26.2]
    INFO - 17:02:08:     17%|█▋        | 17/100 [00:00<00:00, 3782.66 it/sec, obj=203]
    INFO - 17:02:08:     18%|█▊        | 18/100 [00:00<00:00, 3849.75 it/sec, obj=435]
    INFO - 17:02:08:     19%|█▉        | 19/100 [00:00<00:00, 3904.55 it/sec, obj=186]
    INFO - 17:02:08:     20%|██        | 20/100 [00:00<00:00, 3957.26 it/sec, obj=501]
    INFO - 17:02:08:     21%|██        | 21/100 [00:00<00:00, 4010.22 it/sec, obj=82.9]
    INFO - 17:02:08:     22%|██▏       | 22/100 [00:00<00:00, 4060.49 it/sec, obj=8.31]
    INFO - 17:02:08:     23%|██▎       | 23/100 [00:00<00:00, 4107.34 it/sec, obj=6.15]
    INFO - 17:02:08:     24%|██▍       | 24/100 [00:00<00:00, 4121.49 it/sec, obj=60.3]
    INFO - 17:02:08:     25%|██▌       | 25/100 [00:00<00:00, 4157.39 it/sec, obj=323]
    INFO - 17:02:08:     26%|██▌       | 26/100 [00:00<00:00, 4193.66 it/sec, obj=94.4]
    INFO - 17:02:08:     27%|██▋       | 27/100 [00:00<00:00, 4232.40 it/sec, obj=2.01]
    INFO - 17:02:08:     28%|██▊       | 28/100 [00:00<00:00, 4267.31 it/sec, obj=1.87]
    INFO - 17:02:08:     29%|██▉       | 29/100 [00:00<00:00, 4300.94 it/sec, obj=1.93e+3]
    INFO - 17:02:08:     30%|███       | 30/100 [00:00<00:00, 4322.98 it/sec, obj=247]
    INFO - 17:02:08:     31%|███       | 31/100 [00:00<00:00, 4350.06 it/sec, obj=58.4]
    INFO - 17:02:08:     32%|███▏      | 32/100 [00:00<00:00, 4378.05 it/sec, obj=3.72]
    INFO - 17:02:08:     33%|███▎      | 33/100 [00:00<00:00, 4403.82 it/sec, obj=160]
    INFO - 17:02:08:     34%|███▍      | 34/100 [00:00<00:00, 4427.81 it/sec, obj=335]
    INFO - 17:02:08:     35%|███▌      | 35/100 [00:00<00:00, 4436.67 it/sec, obj=333]
    INFO - 17:02:08:     36%|███▌      | 36/100 [00:00<00:00, 4447.44 it/sec, obj=590]
    INFO - 17:02:08:     37%|███▋      | 37/100 [00:00<00:00, 4467.29 it/sec, obj=1.5e+3]
    INFO - 17:02:08:     38%|███▊      | 38/100 [00:00<00:00, 4488.67 it/sec, obj=67.5]
    INFO - 17:02:08:     39%|███▉      | 39/100 [00:00<00:00, 4511.12 it/sec, obj=848]
    INFO - 17:02:08:     40%|████      | 40/100 [00:00<00:00, 4528.02 it/sec, obj=688]
    INFO - 17:02:08:     41%|████      | 41/100 [00:00<00:00, 4539.53 it/sec, obj=8.1]
    INFO - 17:02:08:     42%|████▏     | 42/100 [00:00<00:00, 4552.19 it/sec, obj=2.39e+3]
    INFO - 17:02:08:     43%|████▎     | 43/100 [00:00<00:00, 4564.91 it/sec, obj=1.06e+3]
    INFO - 17:02:08:     44%|████▍     | 44/100 [00:00<00:00, 4555.65 it/sec, obj=22]
    INFO - 17:02:08:     45%|████▌     | 45/100 [00:00<00:00, 4555.29 it/sec, obj=294]
    INFO - 17:02:08:     46%|████▌     | 46/100 [00:00<00:00, 4565.93 it/sec, obj=1.04e+3]
    INFO - 17:02:08:     47%|████▋     | 47/100 [00:00<00:00, 4579.57 it/sec, obj=29.5]
    INFO - 17:02:08:     48%|████▊     | 48/100 [00:00<00:00, 4595.55 it/sec, obj=165]
    INFO - 17:02:08:     49%|████▉     | 49/100 [00:00<00:00, 4611.09 it/sec, obj=261]
    INFO - 17:02:08:     50%|█████     | 50/100 [00:00<00:00, 4621.52 it/sec, obj=55.2]
    INFO - 17:02:08:     51%|█████     | 51/100 [00:00<00:00, 4634.49 it/sec, obj=388]
    INFO - 17:02:08:     52%|█████▏    | 52/100 [00:00<00:00, 4648.32 it/sec, obj=358]
    INFO - 17:02:08:     53%|█████▎    | 53/100 [00:00<00:00, 4662.78 it/sec, obj=1.04e+3]
    INFO - 17:02:08:     54%|█████▍    | 54/100 [00:00<00:00, 4676.50 it/sec, obj=16.7]
    INFO - 17:02:08:     55%|█████▌    | 55/100 [00:00<00:00, 4690.38 it/sec, obj=21.5]
    INFO - 17:02:08:     56%|█████▌    | 56/100 [00:00<00:00, 4696.96 it/sec, obj=84.9]
    INFO - 17:02:08:     57%|█████▋    | 57/100 [00:00<00:00, 4706.58 it/sec, obj=338]
    INFO - 17:02:08:     58%|█████▊    | 58/100 [00:00<00:00, 4706.41 it/sec, obj=869]
    INFO - 17:02:08:     59%|█████▉    | 59/100 [00:00<00:00, 4715.75 it/sec, obj=400]
    INFO - 17:02:08:     60%|██████    | 60/100 [00:00<00:00, 4727.84 it/sec, obj=160]
    INFO - 17:02:08:     61%|██████    | 61/100 [00:00<00:00, 4738.71 it/sec, obj=370]
    INFO - 17:02:08:     62%|██████▏   | 62/100 [00:00<00:00, 4746.51 it/sec, obj=274]
    INFO - 17:02:08:     63%|██████▎   | 63/100 [00:00<00:00, 4754.42 it/sec, obj=48.1]
    INFO - 17:02:08:     64%|██████▍   | 64/100 [00:00<00:00, 4762.20 it/sec, obj=1.25]
    INFO - 17:02:08:     65%|██████▌   | 65/100 [00:00<00:00, 4769.92 it/sec, obj=167]
    INFO - 17:02:08:     66%|██████▌   | 66/100 [00:00<00:00, 4771.18 it/sec, obj=91.1]
    INFO - 17:02:08:     67%|██████▋   | 67/100 [00:00<00:00, 4771.27 it/sec, obj=845]
    INFO - 17:02:08:     68%|██████▊   | 68/100 [00:00<00:00, 4777.51 it/sec, obj=5.05]
    INFO - 17:02:08:     69%|██████▉   | 69/100 [00:00<00:00, 4786.91 it/sec, obj=96]
    INFO - 17:02:08:     70%|███████   | 70/100 [00:00<00:00, 4791.14 it/sec, obj=1.35e+3]
    INFO - 17:02:08:     71%|███████   | 71/100 [00:00<00:00, 4795.65 it/sec, obj=74.5]
    INFO - 17:02:08:     72%|███████▏  | 72/100 [00:00<00:00, 4803.33 it/sec, obj=463]
    INFO - 17:02:08:     73%|███████▎  | 73/100 [00:00<00:00, 4811.49 it/sec, obj=25.2]
    INFO - 17:02:08:     74%|███████▍  | 74/100 [00:00<00:00, 4820.81 it/sec, obj=540]
    INFO - 17:02:08:     75%|███████▌  | 75/100 [00:00<00:00, 4825.33 it/sec, obj=59.6]
    INFO - 17:02:08:     76%|███████▌  | 76/100 [00:00<00:00, 4832.00 it/sec, obj=43.9]
    INFO - 17:02:08:     77%|███████▋  | 77/100 [00:00<00:00, 4839.24 it/sec, obj=211]
    INFO - 17:02:08:     78%|███████▊  | 78/100 [00:00<00:00, 4847.11 it/sec, obj=641]
    INFO - 17:02:08:     79%|███████▉  | 79/100 [00:00<00:00, 4852.39 it/sec, obj=101]
    INFO - 17:02:08:     80%|████████  | 80/100 [00:00<00:00, 4858.81 it/sec, obj=723]
    INFO - 17:02:08:     81%|████████  | 81/100 [00:00<00:00, 4866.83 it/sec, obj=82.6]
    INFO - 17:02:08:     82%|████████▏ | 82/100 [00:00<00:00, 4875.37 it/sec, obj=580]
    INFO - 17:02:08:     83%|████████▎ | 83/100 [00:00<00:00, 4883.67 it/sec, obj=35.6]
    INFO - 17:02:08:     84%|████████▍ | 84/100 [00:00<00:00, 4892.27 it/sec, obj=1.72e+3]
    INFO - 17:02:08:     85%|████████▌ | 85/100 [00:00<00:00, 4900.83 it/sec, obj=4.25]
    INFO - 17:02:08:     86%|████████▌ | 86/100 [00:00<00:00, 4905.22 it/sec, obj=113]
    INFO - 17:02:08:     87%|████████▋ | 87/100 [00:00<00:00, 4886.63 it/sec, obj=54.1]
    INFO - 17:02:08:     88%|████████▊ | 88/100 [00:00<00:00, 4891.19 it/sec, obj=2.36e+3]
    INFO - 17:02:08:     89%|████████▉ | 89/100 [00:00<00:00, 4898.28 it/sec, obj=119]
    INFO - 17:02:08:     90%|█████████ | 90/100 [00:00<00:00, 4906.07 it/sec, obj=227]
    INFO - 17:02:08:     91%|█████████ | 91/100 [00:00<00:00, 4913.39 it/sec, obj=951]
    INFO - 17:02:08:     92%|█████████▏| 92/100 [00:00<00:00, 4920.95 it/sec, obj=246]
    INFO - 17:02:08:     93%|█████████▎| 93/100 [00:00<00:00, 4924.57 it/sec, obj=76.2]
    INFO - 17:02:08:     94%|█████████▍| 94/100 [00:00<00:00, 4923.94 it/sec, obj=0.75]
    INFO - 17:02:08:     95%|█████████▌| 95/100 [00:00<00:00, 4924.47 it/sec, obj=123]
    INFO - 17:02:08:     96%|█████████▌| 96/100 [00:00<00:00, 4929.64 it/sec, obj=957]
    INFO - 17:02:08:     97%|█████████▋| 97/100 [00:00<00:00, 4935.85 it/sec, obj=187]
    INFO - 17:02:08:     98%|█████████▊| 98/100 [00:00<00:00, 4941.24 it/sec, obj=122]
    INFO - 17:02:08:     99%|█████████▉| 99/100 [00:00<00:00, 4947.65 it/sec, obj=146]
    INFO - 17:02:08:    100%|██████████| 100/100 [00:00<00:00, 4954.76 it/sec, obj=167]
    INFO - 17:02:08: Optimization result:
    INFO - 17:02:08:    Optimizer info:
    INFO - 17:02:08:       Status: None
    INFO - 17:02:08:       Message: None
    INFO - 17:02:08:       Number of calls to the objective function by the optimizer: 100
    INFO - 17:02:08:    Solution:
    INFO - 17:02:08:       Objective: 0.7502023831914535
    INFO - 17:02:08:       Design space:
    INFO - 17:02:08:          +------+-------------+--------------------+-------------+-------+
    INFO - 17:02:08:          | Name | Lower bound |       Value        | Upper bound | Type  |
    INFO - 17:02:08:          +------+-------------+--------------------+-------------+-------+
    INFO - 17:02:08:          | x    |      -2     | 0.6290200784167475 |      2      | float |
    INFO - 17:02:08:          | y    |      -2     | 0.3173990065780083 |      2      | float |
    INFO - 17:02:08:          +------+-------------+--------------------+-------------+-------+
    INFO - 17:02:08: *** End DOEScenario execution (time: 0:00:00.029459) ***

{'eval_jac': False, 'n_samples': 100, 'algo': 'OT_OPT_LHS'}
```





<!-- GENERATED FROM PYTHON SOURCE LINES 86-97 -->

!!! note

    `DOEScenario` is mainly used to solve an optimization problem
    with a DOE algorithm instead of an optimization algorithm.
    This is the reason why
    the log presents an optimization problem and optimization result.

Lastly,
we can export the result to an `IODataset`
which is a subclass of `Dataset`,
which is a subclass of `pandas.DataFrame`:

<!-- GENERATED FROM PYTHON SOURCE LINES 98-101 -->

```{.python }
dataset = scenario.to_dataset(opt_naming=False)
dataset

```




Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }
/home/tortank-el-famoso/Documents/INSA/S4_MODIA_N7/Metamodelisation/lh2pac/.venv/lib/python3.10/site-packages/pandas/core/frame.py:706: DeprecationWarning: Passing a BlockManager to IODataset is deprecated and will raise in a future version. Use public APIs instead.
  warnings.warn(
/home/tortank-el-famoso/Documents/INSA/S4_MODIA_N7/Metamodelisation/lh2pac/.venv/lib/python3.10/site-packages/pandas/core/frame.py:706: DeprecationWarning: Passing a BlockManager to IODataset is deprecated and will raise in a future version. Use public APIs instead.
  warnings.warn(

```



<div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead tr th {
            text-align: left;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr>
          <th>GROUP</th>
          <th colspan="2" halign="left">inputs</th>
          <th>outputs</th>
        </tr>
        <tr>
          <th>VARIABLE</th>
          <th>x</th>
          <th>y</th>
          <th>z</th>
        </tr>
        <tr>
          <th>COMPONENT</th>
          <th>0</th>
          <th>0</th>
          <th>0</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0</th>
          <td>1.922870</td>
          <td>-0.983117</td>
          <td>2191.602002</td>
        </tr>
        <tr>
          <th>1</th>
          <td>-1.623831</td>
          <td>-0.631063</td>
          <td>1074.794249</td>
        </tr>
        <tr>
          <th>2</th>
          <td>-1.284228</td>
          <td>-0.939310</td>
          <td>675.278032</td>
        </tr>
        <tr>
          <th>3</th>
          <td>-1.404675</td>
          <td>-1.412094</td>
          <td>1151.744652</td>
        </tr>
        <tr>
          <th>4</th>
          <td>-1.948194</td>
          <td>-1.200895</td>
          <td>2505.048222</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>95</th>
          <td>-1.529573</td>
          <td>-0.743620</td>
          <td>957.019782</td>
        </tr>
        <tr>
          <th>96</th>
          <td>-0.030064</td>
          <td>-1.364104</td>
          <td>187.385541</td>
        </tr>
        <tr>
          <th>97</th>
          <td>1.278946</td>
          <td>0.531163</td>
          <td>122.078532</td>
        </tr>
        <tr>
          <th>98</th>
          <td>-0.501204</td>
          <td>1.450870</td>
          <td>146.173021</td>
        </tr>
        <tr>
          <th>99</th>
          <td>0.100055</td>
          <td>1.297336</td>
          <td>166.530600</td>
        </tr>
      </tbody>
    </table>
    <p>100 rows × 3 columns</p>
    </div>
</div>


<!-- GENERATED FROM PYTHON SOURCE LINES 102-106 -->

!!! seealso

    - [Dataset examples](https://gemseo.readthedocs.io/en/stable/examples/dataset/index.html)
    - [DOE examples](https://gemseo.readthedocs.io/en/stable/examples/doe/index.html)


**Total running time of the script:** ( 0 minutes  0.328 seconds)

<div id="download_links"></div>



[:fontawesome-solid-download: Download Python source code: plot_doe.py](./plot_doe.py){ .md-button .center}

[:fontawesome-solid-download: Download Jupyter notebook: plot_doe.ipynb](./plot_doe.ipynb){ .md-button .center}


[Gallery generated by mkdocs-gallery](https://mkdocs-gallery.github.io){: .mkd-glr-signature }
